//jquery.jplayer.js

(function(c,h){c.fn.jPlayer=function(a){var b=typeof a==="string",d=Array.prototype.slice.call(arguments,1),f=this;a=!b&&d.length?c.extend.apply(null,[true,a].concat(d)):a;if(b&&a.charAt(0)==="_")return f;b?this.each(function(){var e=c.data(this,"jPlayer"),g=e&&c.isFunction(e[a])?e[a].apply(e,d):e;if(g!==e&&g!==h){f=g;return false}}):this.each(function(){var e=c.data(this,"jPlayer");if(e){e.option(a||{})._init();e.option(a||{})}else c.data(this,"jPlayer",new c.jPlayer(a,this))});return f};c.jPlayer=
function(a,b){if(arguments.length){this.element=c(b);this.options=c.extend(true,{},this.options,a);var d=this;this.element.bind("remove.jPlayer",function(){d.destroy()});this._init()}};c.jPlayer.event={ready:"jPlayer_ready",resize:"jPlayer_resize",error:"jPlayer_error",warning:"jPlayer_warning",loadstart:"jPlayer_loadstart",progress:"jPlayer_progress",suspend:"jPlayer_suspend",abort:"jPlayer_abort",emptied:"jPlayer_emptied",stalled:"jPlayer_stalled",play:"jPlayer_play",pause:"jPlayer_pause",loadedmetadata:"jPlayer_loadedmetadata",
loadeddata:"jPlayer_loadeddata",waiting:"jPlayer_waiting",playing:"jPlayer_playing",canplay:"jPlayer_canplay",canplaythrough:"jPlayer_canplaythrough",seeking:"jPlayer_seeking",seeked:"jPlayer_seeked",timeupdate:"jPlayer_timeupdate",ended:"jPlayer_ended",ratechange:"jPlayer_ratechange",durationchange:"jPlayer_durationchange",volumechange:"jPlayer_volumechange"};c.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","loadeddata","canplaythrough","ratechange"];c.jPlayer.pause=
function(){c.each(c.jPlayer.prototype.instances,function(a,b){b.data("jPlayer").status.srcSet&&b.jPlayer("pause")})};c.jPlayer.timeFormat={showHour:false,showMin:true,showSec:true,padHour:false,padMin:true,padSec:true,sepHour:":",sepMin:":",sepSec:""};c.jPlayer.convertTime=function(a){a=new Date(a*1E3);var b=a.getUTCHours(),d=a.getUTCMinutes();a=a.getUTCSeconds();b=c.jPlayer.timeFormat.padHour&&b<10?"0"+b:b;d=c.jPlayer.timeFormat.padMin&&d<10?"0"+d:d;a=c.jPlayer.timeFormat.padSec&&a<10?"0"+a:a;return(c.jPlayer.timeFormat.showHour?
b+c.jPlayer.timeFormat.sepHour:"")+(c.jPlayer.timeFormat.showMin?d+c.jPlayer.timeFormat.sepMin:"")+(c.jPlayer.timeFormat.showSec?a+c.jPlayer.timeFormat.sepSec:"")};c.jPlayer.uaMatch=function(a){a=a.toLowerCase();var b=/(opera)(?:.*version)?[ \/]([\w.]+)/,d=/(msie) ([\w.]+)/,f=/(mozilla)(?:.*? rv:([\w.]+))?/;a=/(webkit)[ \/]([\w.]+)/.exec(a)||b.exec(a)||d.exec(a)||a.indexOf("compatible")<0&&f.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};c.jPlayer.browser={};var m=c.jPlayer.uaMatch(navigator.userAgent);
if(m.browser){c.jPlayer.browser[m.browser]=true;c.jPlayer.browser.version=m.version}c.jPlayer.prototype={count:0,version:{script:"2.0.0",needFlash:"2.0.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:0.8,muted:false,backgroundColor:"#000000",cssSelectorAncestor:"#jp_interface_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",
volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",currentTime:".jp-current-time",duration:".jp-duration"},idPrefix:"jp",errorAlerts:false,warningAlerts:false},instances:{},status:{src:"",media:{},paused:true,format:{},formatType:"",waitForPlay:true,waitForLoad:true,srcSet:false,video:false,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0},_status:{volume:h,muted:false,width:0,height:0},internal:{ready:false,instance:h,htmlDlyCmdId:h},solution:{html:true,
flash:true},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:true,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:true,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:false,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:false,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:false,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:true,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',
flashCanPlay:false,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:false,media:"video"}},_init:function(){var a=this;this.element.empty();this.status=c.extend({},this.status,this._status);this.internal=c.extend({},this.internal);this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.flash={};this.css={};this.css.cs={};this.css.jq={};this.status.volume=this._limitValue(this.options.volume,0,1);this.status.muted=
this.options.muted;this.status.width=this.element.css("width");this.status.height=this.element.css("height");this.element.css({"background-color":this.options.backgroundColor});c.each(this.options.supplied.toLowerCase().split(","),function(e,g){var i=g.replace(/^\s+|\s+$/g,"");if(a.format[i]){var j=false;c.each(a.formats,function(n,k){if(i===k){j=true;return false}});j||a.formats.push(i)}});c.each(this.options.solution.toLowerCase().split(","),function(e,g){var i=g.replace(/^\s+|\s+$/g,"");if(a.solution[i]){var j=
false;c.each(a.solutions,function(n,k){if(i===k){j=true;return false}});j||a.solutions.push(i)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")===""&&this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=c.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=c.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:h});this.internal.video=c.extend({},{id:this.options.idPrefix+
"_video_"+this.count,jq:h});this.internal.flash=c.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:h,swf:this.options.swfPath+(this.options.swfPath!==""&&this.options.swfPath.slice(-1)!=="/"?"/":"")+"Jplayer.swf"});this.internal.poster=c.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:h});c.each(c.jPlayer.event,function(e,g){if(a.options[e]!==h){a.element.bind(g+".jPlayer",a.options[e]);a.options[e]=h}});this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=
this.internal.poster.id;this.htmlElement.poster.onload=function(){if(!a.status.video||a.status.waitForPlay)a.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=c("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});this.internal.poster.jq.hide();this.require.audio=false;this.require.video=false;c.each(this.formats,function(e,g){a.require[a.format[g].media]=true});this.html.audio.available=false;if(this.require.audio){this.htmlElement.audio=
document.createElement("audio");this.htmlElement.audio.id=this.internal.audio.id;this.html.audio.available=!!this.htmlElement.audio.canPlayType}this.html.video.available=false;if(this.require.video){this.htmlElement.video=document.createElement("video");this.htmlElement.video.id=this.internal.video.id;this.html.video.available=!!this.htmlElement.video.canPlayType}this.flash.available=this._checkForFlash(10);this.html.canPlay={};this.flash.canPlay={};c.each(this.formats,function(e,g){a.html.canPlay[g]=
a.html[a.format[g].media].available&&""!==a.htmlElement[a.format[g].media].canPlayType(a.format[g].codec);a.flash.canPlay[g]=a.format[g].flashCanPlay&&a.flash.available});this.html.desired=false;this.flash.desired=false;c.each(this.solutions,function(e,g){if(e===0)a[g].desired=true;else{var i=false,j=false;c.each(a.formats,function(n,k){if(a[a.solutions[0]].canPlay[k])if(a.format[k].media==="video")j=true;else i=true});a[g].desired=a.require.audio&&!i||a.require.video&&!j}});this.html.support={};
this.flash.support={};c.each(this.formats,function(e,g){a.html.support[g]=a.html.canPlay[g]&&a.html.desired;a.flash.support[g]=a.flash.canPlay[g]&&a.flash.desired});this.html.used=false;this.flash.used=false;c.each(this.solutions,function(e,g){c.each(a.formats,function(i,j){if(a[g].support[j]){a[g].used=true;return false}})});this.html.used||this.flash.used||this._error({type:c.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:c.jPlayer.errorMsg.NO_SOLUTION,
hint:c.jPlayer.errorHint.NO_SOLUTION});this.html.active=false;this.html.audio.gate=false;this.html.video.gate=false;this.flash.active=false;this.flash.gate=false;if(this.flash.used){var b="id="+escape(this.internal.self.id)+"&vol="+this.status.volume+"&muted="+this.status.muted;if(c.browser.msie&&Number(c.browser.version)<=8){var d='<object id="'+this.internal.flash.id+'"';d+=' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"';d+=' codebase="'+document.URL.substring(0,document.URL.indexOf(":"))+
'://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab"';d+=' type="application/x-shockwave-flash"';d+=' width="0" height="0">';d+="</object>";var f=[];f[0]='<param name="movie" value="'+this.internal.flash.swf+'" />';f[1]='<param name="quality" value="high" />';f[2]='<param name="FlashVars" value="'+b+'" />';f[3]='<param name="allowScriptAccess" value="always" />';f[4]='<param name="bgcolor" value="'+this.options.backgroundColor+'" />';b=document.createElement(d);for(d=0;d<f.length;d++)b.appendChild(document.createElement(f[d]));
this.element.append(b)}else{f='<embed name="'+this.internal.flash.id+'" id="'+this.internal.flash.id+'" src="'+this.internal.flash.swf+'"';f+=' width="0" height="0" bgcolor="'+this.options.backgroundColor+'"';f+=' quality="high" FlashVars="'+b+'"';f+=' allowScriptAccess="always"';f+=' type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />';this.element.append(f)}this.internal.flash.jq=c("#"+this.internal.flash.id);this.internal.flash.jq.css({width:"0px",
height:"0px"})}if(this.html.used){if(this.html.audio.available){this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio);this.element.append(this.htmlElement.audio);this.internal.audio.jq=c("#"+this.internal.audio.id)}if(this.html.video.available){this._addHtmlEventListeners(this.htmlElement.video,this.html.video);this.element.append(this.htmlElement.video);this.internal.video.jq=c("#"+this.internal.video.id);this.internal.video.jq.css({width:"0px",height:"0px"})}}this.html.used&&!this.flash.used&&
window.setTimeout(function(){a.internal.ready=true;a.version.flash="n/a";a._trigger(c.jPlayer.event.ready)},100);c.each(this.options.cssSelector,function(e,g){a._cssSelector(e,g)});this._updateInterface();this._updateButtons(false);this._updateVolume(this.status.volume);this._updateMute(this.status.muted);this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();c.jPlayer.prototype.count++},destroy:function(){this._resetStatus();this._updateInterface();this._seeked();this.css.jq.currentTime.length&&
this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");this.status.srcSet&&this.pause();c.each(this.css.jq,function(a,b){b.unbind(".jPlayer")});this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();this.instances[this.internal.instance]=h},enable:function(){},disable:function(){},_addHtmlEventListeners:function(a,b){var d=this;a.preload=this.options.preload;a.muted=this.options.muted;a.addEventListener("progress",function(){if(b.gate&&
!d.status.waitForLoad){d._getHtmlStatus(a);d._updateInterface();d._trigger(c.jPlayer.event.progress)}},false);a.addEventListener("timeupdate",function(){if(b.gate&&!d.status.waitForLoad){d._getHtmlStatus(a);d._updateInterface();d._trigger(c.jPlayer.event.timeupdate)}},false);a.addEventListener("durationchange",function(){if(b.gate&&!d.status.waitForLoad){d.status.duration=this.duration;d._getHtmlStatus(a);d._updateInterface();d._trigger(c.jPlayer.event.durationchange)}},false);a.addEventListener("play",
function(){if(b.gate&&!d.status.waitForLoad){d._updateButtons(true);d._trigger(c.jPlayer.event.play)}},false);a.addEventListener("playing",function(){if(b.gate&&!d.status.waitForLoad){d._updateButtons(true);d._seeked();d._trigger(c.jPlayer.event.playing)}},false);a.addEventListener("pause",function(){if(b.gate&&!d.status.waitForLoad){d._updateButtons(false);d._trigger(c.jPlayer.event.pause)}},false);a.addEventListener("waiting",function(){if(b.gate&&!d.status.waitForLoad){d._seeking();d._trigger(c.jPlayer.event.waiting)}},
false);a.addEventListener("canplay",function(){if(b.gate&&!d.status.waitForLoad){a.volume=d._volumeFix(d.status.volume);d._trigger(c.jPlayer.event.canplay)}},false);a.addEventListener("seeking",function(){if(b.gate&&!d.status.waitForLoad){d._seeking();d._trigger(c.jPlayer.event.seeking)}},false);a.addEventListener("seeked",function(){if(b.gate&&!d.status.waitForLoad){d._seeked();d._trigger(c.jPlayer.event.seeked)}},false);a.addEventListener("suspend",function(){if(b.gate&&!d.status.waitForLoad){d._seeked();
d._trigger(c.jPlayer.event.suspend)}},false);a.addEventListener("ended",function(){if(b.gate&&!d.status.waitForLoad){if(!c.jPlayer.browser.webkit)d.htmlElement.media.currentTime=0;d.htmlElement.media.pause();d._updateButtons(false);d._getHtmlStatus(a,true);d._updateInterface();d._trigger(c.jPlayer.event.ended)}},false);a.addEventListener("error",function(){if(b.gate&&!d.status.waitForLoad){d._updateButtons(false);d._seeked();if(d.status.srcSet){d.status.waitForLoad=true;d.status.waitForPlay=true;
d.status.video&&d.internal.video.jq.css({width:"0px",height:"0px"});d._validString(d.status.media.poster)&&d.internal.poster.jq.show();d.css.jq.videoPlay.length&&d.css.jq.videoPlay.show();d._error({type:c.jPlayer.error.URL,context:d.status.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL})}}},false);c.each(c.jPlayer.htmlEvent,function(f,e){a.addEventListener(this,function(){b.gate&&!d.status.waitForLoad&&d._trigger(c.jPlayer.event[e])},false)})},_getHtmlStatus:function(a,b){var d=0,
f=0,e=0,g=0;d=a.currentTime;f=this.status.duration>0?100*d/this.status.duration:0;if(typeof a.seekable==="object"&&a.seekable.length>0){e=this.status.duration>0?100*a.seekable.end(a.seekable.length-1)/this.status.duration:100;g=100*a.currentTime/a.seekable.end(a.seekable.length-1)}else{e=100;g=f}if(b)f=g=d=0;this.status.seekPercent=e;this.status.currentPercentRelative=g;this.status.currentPercentAbsolute=f;this.status.currentTime=d},_resetStatus:function(){this.status=c.extend({},this.status,c.jPlayer.prototype.status)},
_trigger:function(a,b,d){a=c.Event(a);a.jPlayer={};a.jPlayer.version=c.extend({},this.version);a.jPlayer.status=c.extend(true,{},this.status);a.jPlayer.html=c.extend(true,{},this.html);a.jPlayer.flash=c.extend(true,{},this.flash);if(b)a.jPlayer.error=c.extend({},b);if(d)a.jPlayer.warning=c.extend({},d);this.element.trigger(a)},jPlayerFlashEvent:function(a,b){if(a===c.jPlayer.event.ready&&!this.internal.ready){this.internal.ready=true;this.version.flash=b.version;this.version.needFlash!==this.version.flash&&
this._error({type:c.jPlayer.error.VERSION,context:this.version.flash,message:c.jPlayer.errorMsg.VERSION+this.version.flash,hint:c.jPlayer.errorHint.VERSION});this._trigger(a)}if(this.flash.gate)switch(a){case c.jPlayer.event.progress:this._getFlashStatus(b);this._updateInterface();this._trigger(a);break;case c.jPlayer.event.timeupdate:this._getFlashStatus(b);this._updateInterface();this._trigger(a);break;case c.jPlayer.event.play:this._seeked();this._updateButtons(true);this._trigger(a);break;case c.jPlayer.event.pause:this._updateButtons(false);
this._trigger(a);break;case c.jPlayer.event.ended:this._updateButtons(false);this._trigger(a);break;case c.jPlayer.event.error:this.status.waitForLoad=true;this.status.waitForPlay=true;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._error({type:c.jPlayer.error.URL,
context:b.src,message:c.jPlayer.errorMsg.URL,hint:c.jPlayer.errorHint.URL});break;case c.jPlayer.event.seeking:this._seeking();this._trigger(a);break;case c.jPlayer.event.seeked:this._seeked();this._trigger(a);break;default:this._trigger(a)}return false},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent;this.status.currentPercentRelative=a.currentPercentRelative;this.status.currentPercentAbsolute=a.currentPercentAbsolute;this.status.currentTime=a.currentTime;this.status.duration=a.duration},
_updateButtons:function(a){this.status.paused=!a;if(this.css.jq.play.length&&this.css.jq.pause.length)if(a){this.css.jq.play.hide();this.css.jq.pause.show()}else{this.css.jq.play.show();this.css.jq.pause.hide()}},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&this.css.jq.playBar.width(this.status.currentPercentRelative+"%");this.css.jq.currentTime.length&&this.css.jq.currentTime.text(c.jPlayer.convertTime(this.status.currentTime));
this.css.jq.duration.length&&this.css.jq.duration.text(c.jPlayer.convertTime(this.status.duration))},_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg")},setMedia:function(a){var b=this;this._seeked();clearTimeout(this.internal.htmlDlyCmdId);var d=this.html.audio.gate,f=this.html.video.gate,e=false;c.each(this.formats,function(g,i){var j=b.format[i].media==="video";
c.each(b.solutions,function(n,k){if(b[k].support[i]&&b._validString(a[i])){var l=k==="html";if(j)if(l){b.html.audio.gate=false;b.html.video.gate=true;b.flash.gate=false}else{b.html.audio.gate=false;b.html.video.gate=false;b.flash.gate=true}else if(l){b.html.audio.gate=true;b.html.video.gate=false;b.flash.gate=false}else{b.html.audio.gate=false;b.html.video.gate=false;b.flash.gate=true}if(b.flash.active||b.html.active&&b.flash.gate||d===b.html.audio.gate&&f===b.html.video.gate)b.clearMedia();else if(d!==
b.html.audio.gate&&f!==b.html.video.gate){b._html_pause();b.status.video&&b.internal.video.jq.css({width:"0px",height:"0px"});b._resetStatus()}if(j){if(l){b._html_setVideo(a);b.html.active=true;b.flash.active=false}else{b._flash_setVideo(a);b.html.active=false;b.flash.active=true}b.css.jq.videoPlay.length&&b.css.jq.videoPlay.show();b.status.video=true}else{if(l){b._html_setAudio(a);b.html.active=true;b.flash.active=false}else{b._flash_setAudio(a);b.html.active=false;b.flash.active=true}b.css.jq.videoPlay.length&&
b.css.jq.videoPlay.hide();b.status.video=false}e=true;return false}});if(e)return false});if(e){if(this._validString(a.poster))if(this.htmlElement.poster.src!==a.poster)this.htmlElement.poster.src=a.poster;else this.internal.poster.jq.show();else this.internal.poster.jq.hide();this.status.srcSet=true;this.status.media=c.extend({},a);this._updateButtons(false);this._updateInterface()}else{this.status.srcSet&&!this.status.waitForPlay&&this.pause();this.html.audio.gate=false;this.html.video.gate=false;
this.flash.gate=false;this.html.active=false;this.flash.active=false;this._resetStatus();this._updateInterface();this._updateButtons(false);this.internal.poster.jq.hide();this.html.used&&this.require.video&&this.internal.video.jq.css({width:"0px",height:"0px"});this.flash.used&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._error({type:c.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:c.jPlayer.errorMsg.NO_SUPPORT,hint:c.jPlayer.errorHint.NO_SUPPORT})}},
clearMedia:function(){this._resetStatus();this._updateButtons(false);this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);if(this.html.active)this._html_clearMedia();else this.flash.active&&this._flash_clearMedia()},load:function(){if(this.status.srcSet)if(this.html.active)this._html_load();else this.flash.active&&this._flash_load();else this._urlNotSetError("load")},play:function(a){a=typeof a==="number"?a:NaN;if(this.status.srcSet)if(this.html.active)this._html_play(a);else this.flash.active&&
this._flash_play(a);else this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(a){a=typeof a==="number"?a:NaN;if(this.status.srcSet)if(this.html.active)this._html_pause(a);else this.flash.active&&this._flash_pause(a);else this._urlNotSetError("pause")},pauseOthers:function(){var a=this;c.each(this.instances,function(b,d){a.element!==d&&d.data("jPlayer").status.srcSet&&d.jPlayer("pause")})},stop:function(){if(this.status.srcSet)if(this.html.active)this._html_pause(0);else this.flash.active&&
this._flash_pause(0);else this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100);if(this.status.srcSet)if(this.html.active)this._html_playHead(a);else this.flash.active&&this._flash_playHead(a);else this._urlNotSetError("playHead")},mute:function(){this.status.muted=true;this.html.used&&this._html_mute(true);this.flash.used&&this._flash_mute(true);this._updateMute(true);this._updateVolume(0);this._trigger(c.jPlayer.event.volumechange)},unmute:function(){this.status.muted=false;
this.html.used&&this._html_mute(false);this.flash.used&&this._flash_mute(false);this._updateMute(false);this._updateVolume(this.status.volume);this._trigger(c.jPlayer.event.volumechange)},_updateMute:function(a){if(this.css.jq.mute.length&&this.css.jq.unmute.length)if(a){this.css.jq.mute.hide();this.css.jq.unmute.show()}else{this.css.jq.mute.show();this.css.jq.unmute.hide()}},volume:function(a){a=this._limitValue(a,0,1);this.status.volume=a;this.html.used&&this._html_volume(a);this.flash.used&&this._flash_volume(a);
this.status.muted||this._updateVolume(a);this._trigger(c.jPlayer.event.volumechange)},volumeBar:function(a){if(!this.status.muted&&this.css.jq.volumeBar){var b=this.css.jq.volumeBar.offset();a=a.pageX-b.left;b=this.css.jq.volumeBar.width();this.volume(a/b)}},volumeBarValue:function(a){this.volumeBar(a)},_updateVolume:function(a){this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.width(a*100+"%")},_volumeFix:function(a){var b=0.0010*Math.random();return a+(a<0.5?b:-b)},_cssSelectorAncestor:function(a,
b){this.options.cssSelectorAncestor=a;b&&c.each(this.options.cssSelector,function(d,f){self._cssSelector(d,f)})},_cssSelector:function(a,b){var d=this;if(typeof b==="string")if(c.jPlayer.prototype.options.cssSelector[a]){this.css.jq[a]&&this.css.jq[a].length&&this.css.jq[a].unbind(".jPlayer");this.options.cssSelector[a]=b;this.css.cs[a]=this.options.cssSelectorAncestor+" "+b;this.css.jq[a]=b?c(this.css.cs[a]):[];this.css.jq[a].length&&this.css.jq[a].bind("click.jPlayer",function(f){d[a](f);c(this).blur();
return false});b&&this.css.jq[a].length!==1&&this._warning({type:c.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[a],message:c.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[a].length+" found for "+a+" method.",hint:c.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:c.jPlayer.warning.CSS_SELECTOR_METHOD,context:a,message:c.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:c.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:c.jPlayer.warning.CSS_SELECTOR_STRING,
context:b,message:c.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:c.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(a){if(this.css.jq.seekBar){var b=this.css.jq.seekBar.offset();a=a.pageX-b.left;b=this.css.jq.seekBar.width();this.playHead(100*a/b)}},playBar:function(a){this.seekBar(a)},currentTime:function(){},duration:function(){},option:function(a,b){var d=a;if(arguments.length===0)return c.extend(true,{},this.options);if(typeof a==="string"){var f=a.split(".");if(b===h){for(var e=c.extend(true,
{},this.options),g=0;g<f.length;g++)if(e[f[g]]!==h)e=e[f[g]];else{this._warning({type:c.jPlayer.warning.OPTION_KEY,context:a,message:c.jPlayer.warningMsg.OPTION_KEY,hint:c.jPlayer.warningHint.OPTION_KEY});return h}return e}e=d={};for(g=0;g<f.length;g++)if(g<f.length-1){e[f[g]]={};e=e[f[g]]}else e[f[g]]=b}this._setOptions(d);return this},_setOptions:function(a){var b=this;c.each(a,function(d,f){b._setOption(d,f)});return this},_setOption:function(a,b){var d=this;switch(a){case "cssSelectorAncestor":this.options[a]=
b;c.each(d.options.cssSelector,function(f,e){d._cssSelector(f,e)});break;case "cssSelector":c.each(b,function(f,e){d._cssSelector(f,e)})}return this},resize:function(a){this.html.active&&this._resizeHtml(a);this.flash.active&&this._resizeFlash(a);this._trigger(c.jPlayer.event.resize)},_resizePoster:function(){},_resizeHtml:function(){},_resizeFlash:function(a){this.internal.flash.jq.css({width:a.width,height:a.height})},_html_initMedia:function(){this.status.srcSet&&!this.status.waitForPlay&&this.htmlElement.media.pause();
this.options.preload!=="none"&&this._html_load();this._trigger(c.jPlayer.event.timeupdate)},_html_setAudio:function(a){var b=this;c.each(this.formats,function(d,f){if(b.html.support[f]&&a[f]){b.status.src=a[f];b.status.format[f]=true;b.status.formatType=f;return false}});this.htmlElement.media=this.htmlElement.audio;this._html_initMedia()},_html_setVideo:function(a){var b=this;c.each(this.formats,function(d,f){if(b.html.support[f]&&a[f]){b.status.src=a[f];b.status.format[f]=true;b.status.formatType=
f;return false}});this.htmlElement.media=this.htmlElement.video;this._html_initMedia()},_html_clearMedia:function(){if(this.htmlElement.media){this.htmlElement.media.id===this.internal.video.id&&this.internal.video.jq.css({width:"0px",height:"0px"});this.htmlElement.media.pause();this.htmlElement.media.src="";c.browser.msie&&Number(c.browser.version)>=9||this.htmlElement.media.load()}},_html_load:function(){if(this.status.waitForLoad){this.status.waitForLoad=false;this.htmlElement.media.src=this.status.src;
try{this.htmlElement.media.load()}catch(a){}}clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var b=this;this._html_load();this.htmlElement.media.play();if(!isNaN(a))try{this.htmlElement.media.currentTime=a}catch(d){this.internal.htmlDlyCmdId=setTimeout(function(){b.play(a)},100);return}this._html_checkWaitForPlay()},_html_pause:function(a){var b=this;a>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);this.htmlElement.media.pause();if(!isNaN(a))try{this.htmlElement.media.currentTime=
a}catch(d){this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(a)},100);return}a>0&&this._html_checkWaitForPlay()},_html_playHead:function(a){var b=this;this._html_load();try{if(typeof this.htmlElement.media.seekable==="object"&&this.htmlElement.media.seekable.length>0)this.htmlElement.media.currentTime=a*this.htmlElement.media.seekable.end(this.htmlElement.media.seekable.length-1)/100;else if(this.htmlElement.media.duration>0&&!isNaN(this.htmlElement.media.duration))this.htmlElement.media.currentTime=
a*this.htmlElement.media.duration/100;else throw"e";}catch(d){this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(a)},100);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=false;this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();if(this.status.video){this.internal.poster.jq.hide();this.internal.video.jq.css({width:this.status.width,height:this.status.height})}}},_html_volume:function(a){if(this.html.audio.available)this.htmlElement.audio.volume=
a;if(this.html.video.available)this.htmlElement.video.volume=a},_html_mute:function(a){if(this.html.audio.available)this.htmlElement.audio.muted=a;if(this.html.video.available)this.htmlElement.video.muted=a},_flash_setAudio:function(a){var b=this;try{c.each(this.formats,function(f,e){if(b.flash.support[e]&&a[e]){switch(e){case "m4a":b._getMovie().fl_setAudio_m4a(a[e]);break;case "mp3":b._getMovie().fl_setAudio_mp3(a[e])}b.status.src=a[e];b.status.format[e]=true;b.status.formatType=e;return false}});
if(this.options.preload==="auto"){this._flash_load();this.status.waitForLoad=false}}catch(d){this._flashError(d)}},_flash_setVideo:function(a){var b=this;try{c.each(this.formats,function(f,e){if(b.flash.support[e]&&a[e]){switch(e){case "m4v":b._getMovie().fl_setVideo_m4v(a[e])}b.status.src=a[e];b.status.format[e]=true;b.status.formatType=e;return false}});if(this.options.preload==="auto"){this._flash_load();this.status.waitForLoad=false}}catch(d){this._flashError(d)}},_flash_clearMedia:function(){this.internal.flash.jq.css({width:"0px",
height:"0px"});try{this._getMovie().fl_clearMedia()}catch(a){this._flashError(a)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=false},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(b){this._flashError(b)}this.status.waitForLoad=false;this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(b){this._flashError(b)}if(a>0){this.status.waitForLoad=false;this._flash_checkWaitForPlay()}},
_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(b){this._flashError(b)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){if(this.status.waitForPlay){this.status.waitForPlay=false;this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();if(this.status.video){this.internal.poster.jq.hide();this.internal.flash.jq.css({width:this.status.width,height:this.status.height})}}},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(b){this._flashError(b)}},
_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(b){this._flashError(b)}},_getMovie:function(){return document[this.internal.flash.id]},_checkForFlash:function(a){var b=false,d;if(window.ActiveXObject)try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+a);b=true}catch(f){}else if(navigator.plugins&&navigator.mimeTypes.length>0)if(d=navigator.plugins["Shockwave Flash"])if(navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")>=a)b=true;return c.browser.msie&&
Number(c.browser.version)>=9?false:b},_validString:function(a){return a&&typeof a==="string"},_limitValue:function(a,b,d){return a<b?b:a>d?d:a},_urlNotSetError:function(a){this._error({type:c.jPlayer.error.URL_NOT_SET,context:a,message:c.jPlayer.errorMsg.URL_NOT_SET,hint:c.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(a){this._error({type:c.jPlayer.error.FLASH,context:this.internal.flash.swf,message:c.jPlayer.errorMsg.FLASH+a.message,hint:c.jPlayer.errorHint.FLASH})},_error:function(a){this._trigger(c.jPlayer.event.error,
a);if(this.options.errorAlerts)this._alert("Error!"+(a.message?"\n\n"+a.message:"")+(a.hint?"\n\n"+a.hint:"")+"\n\nContext: "+a.context)},_warning:function(a){this._trigger(c.jPlayer.event.warning,h,a);if(this.options.errorAlerts)this._alert("Warning!"+(a.message?"\n\n"+a.message:"")+(a.hint?"\n\n"+a.hint:"")+"\n\nContext: "+a.context)},_alert:function(a){alert("jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a)}};c.jPlayer.error={FLASH:"e_flash",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",
URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};c.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",
VERSION:"jPlayer "+c.jPlayer.prototype.version.script+" needs Jplayer.swf version "+c.jPlayer.prototype.version.needFlash+" but found "};c.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};c.jPlayer.warning=
{CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};c.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of methodCssSelectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};
c.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}})(jQuery);

//jquery.preloader.js

(function(a){a.preLoadImages=function(b,c){var d=[],e,f,g=0;if(typeof b!="undefined"){if(a.isArray(b)){f=b.length;for(e=0;e<f;e++){d[e]=new Image;d[e].onload=function(){g++;a(this).remove();if(g==f){if(a.isFunction(c)){c()}}};d[e].src=b[e]}}else{d[0]=new Image;d[0].onload=function(){if(a.isFunction(c)){c()}};d[0].src=b}}d=undefined};a.preLoadCSSImages=function(b){var c=[],d,e=[],f=0,g,h=new RegExp("url((.*))","i"),i;var j=document.styleSheets,k,l,m,n,o,p,q,r;for(q=0;q<j.length;q++){var s=j[q];if(typeof s.href=="string"&&s.href.length>0){i=s.href.split("/");i.pop();k=i.join("/")+"/"}else{k="./"}l=s.cssRules?s.cssRules:s.rules;for(r=0;r<l.length;r++){m=l[r];o=m.cssText?m.cssText:m.style.cssText;n=h.exec(o);if(n!=null){p=n[1].substring(1,n[1].indexOf(")",1));if(p.substring(0,4)=="http"){e[e.length]=p}else if(n[1].substring(1,2)=="/"){var t=k.split("/");t.pop();t.pop();p2x=t.join("/");e[e.length]=p2x+p}else{e[e.length]=k+p}}}}g=e.length;for(d=0;d<g;d++){c[d]=new Image;c[d].onload=function(){f++;if(f==g){if(a.isFunction(b)){b()}}};c[d].src=e[d]}};a.preLoadAllImages=function(b,c){if(typeof b!="undefined"){if(a.isFunction(b)){c=b}else if(!a.isArray(b)){b=[b]}}a.preLoadCSSImages(function(){if(b.length>0){a.preLoadImages(b,function(){c()})}else{c()}})}})(jQuery)

//luta.js

function preload(a){$("#luta .loading").show();var b=["img/loading.gif"];$(".personagem").each(function(){var a=get_sprite_img(this);if($.inArray("img/personagens/"+a["image"],b)==-1){b.push("img/personagens/"+a["image"]);b.push("img/personagens/"+get_mirror(a["image"]))}});for(i=0;i<movimentos.length;i++){var c=movimentos[i];if(c[2]>0){var d=armas[equipamentos[c[2]]];if($.inArray("img/armas/"+d["image"],b)==-1){b.push("img/armas/"+d["image"]);b.push("img/armas/"+get_mirror(d["image"]))}if(d["sound"]!=undefined){var e=d["sound"].split(",");for(p=0;p<e.length;p++){var f=e[p];if(f!=undefined&&$(".sound[name='"+f+"']").length==0){$("#sounds").append('<div class="sound" name="'+f+'"></div>')}}}}else if(c[3]>0){var d=habilidades[ordem_habilidades[c[3]]];var g=d["images"];g=g==undefined?undefined:g.split(",");for(p=0;p<g.length;p++){var h=c[0]==1&&g[p].indexOf("[mirror]")>-1;var j=g[p].split("[mirror]")[0];j=h?get_mirror(j):j;if($.inArray("img/habilidades/"+j,b)==-1){b.push("img/habilidades/"+j)}}if(d["sound"]!=undefined){var e=d["sound"].split(",");for(p=0;p<e.length;p++){var f=e[p];if(f!=undefined&&f=="maisdeoitomil"&&lingua.indexOf("pt")<0){f="overninethousand"}if(f!=undefined&&$(".sound[name='"+f+"']").length==0){$("#sounds").append('<div class="sound" name="'+f+'"></div>')}}}}else if(c[4]>0){var d=eventos[ordem_eventos[c[4]]];var g=d["images"];g=g==undefined?undefined:g.split(",");for(p=0;p<g.length;p++){var h=c[0]==1&&g[p].indexOf("[mirror]")>-1;var j=g[p].split("[mirror]")[0];j=h?get_mirror(j):j;if($.inArray("img/eventos/"+j,b)==-1){b.push("img/eventos/"+j)}}if(d["sound"]!=undefined){var e=d["sound"].split(",");for(p=0;p<e.length;p++){var f=e[p];if(f!=undefined&&$(".sound[name='"+f+"']").length==0){$("#sounds").append('<div class="sound" name="'+f+'"></div>')}}}}}var k=0;$.preLoadImages(b,function(){$("#luta .loading").hide();a()});$(".sound").each(function(){carrega_som(this)})}function iniciar(){p1='.personagem[rel="0"]';p2='.personagem[rel="1"]';players[0]["hp"]=players[0]["hp_max"];players[1]["hp"]=players[1]["hp_max"];$(p1).css("margin","120px 0 0 "+init_x_p1+"px");$(p1).removeClass("mirror");$(p2).css("margin","120px 0 0 "+init_x_p2+"px");$(p2).addClass("mirror");$(p1+", "+p2).attr({frame:0,pos:0,status:"parado"});$(".hp.player .bar").animate({width:"257px"});$(".hp.enemy .bar").animate({width:"258px",marginLeft:"22px",backgroundPosition:"0 0"});$(".personagem").each(function(){$(this).stop();set_sprite(this)});$(".arma").remove();$(".objeto").remove();delay=0;perto=false;acoes=[];frame_atual=0;acao_atual=0;arma_atual=[];finalizou=false;for(i=0;i<=movimentos.length;i++){if(i==movimentos.length){acoes.push([delay,"acabar luta"]);continue}var a=movimentos[i];if(a[1]==2||a[1]==3||a[1]==7&&eventos[ordem_eventos[a[4]]]["antes"]==true)continue;var b=undefined;if(i+1<movimentos.length)b=movimentos[i+1];var c=false;var d=false;var e=0;if((a[1]==0||a[1]==1)&&arma_atual[a[0]]!=undefined){var f=armas[equipamentos[arma_atual[a[0]]]];if(f["default"]!=true){c=f["distancia"];d=f["programado"]==true?true:false;e=f["delay"]!=undefined?f["delay"]:0}}if((!c||a[1]==1)&&!perto&&(a[1]==0||a[1]==1)){acoes.push([delay,"aproximar",a[1]==1?a[0]==0?1:0:a[0],a]);perto=true;delay+=tempo_corrida}tipo=["atacar","contra-atacar","esquivar","defender","pegar equipamento","habilidade","jogar equipamento fora","evento"][a[1]];acoes.push([delay,tipo,a[0],a,b]);if(b!=undefined&&b[1]==7&&eventos[ordem_eventos[b[4]]]["antes"]==true){acoes.push([delay,"evento",b[0],b])}if(tipo=="pegar equipamento"){arma_atual[a[0]]=a[2];delay+=300;acoes.push([delay+200,"parar",a[0],a])}else if(tipo=="jogar equipamento fora"){arma_atual[a[0]]=undefined}if(tipo=="habilidade"){delay+=habilidades[ordem_habilidades[a[3]]]["delay"]}if(tipo=="evento"){delay+=eventos[ordem_eventos[a[4]]]["delay"]}if(!d&&(b==undefined||(a[1]==0||a[1]==1)&&b[1]!=2&&b[1]!=3)){acoes.push([delay,"tomar",a[0]==0?1:0,a])}else if(b!=undefined&&b[1]==2&&!d){acoes.push([delay,"esquivar",a[0]==0?1:0,a])}else if(b!=undefined&&b[1]==3&&!d){acoes.push([delay,"defender",a[0]==0?1:0,a])}delay+=200+e;acoes.push([delay,"parar",a[0]==0?1:0,a]);if(tipo=="contra-atacar"){acoes.push([delay,"parar",a[0],a])}if(b!=undefined&&b[1]==1){acoes.push([delay,"parar",a[0],a]);delay+=100}if(perto&&(i+1==movimentos.length||b!=undefined&&(b[0]!=a[0]&&b[1]==0||a[1]==1&&b[0]==a[0]||b[1]!=0)&&b[1]!=1)){if(a[1]==1){acoes.push([delay,"afastar",a[0]==0?1:0,a]);perto=false;delay+=tempo_corrida;acoes.push([delay,"parar",a[0]==0?1:0,a])}else if(!c){acoes.push([delay,"afastar",a[0],a]);perto=false;delay+=tempo_corrida;acoes.push([delay,"parar",a[0],a])}}}}function parar_luta(){delay=0;perto=false;acoes=[];frame_atual=0;acao_atual=0;arma_atual=[];finalizou=false}function dar_dano(a,b){if(a.length>3){if(a[3][6]==1){dano=a[3][5]>0?a[3][5]:miss;mostrar_dano(a[2]==0?1:0,dano,false,b,true)}else{dano=a[3][5]>0?a[3][5]:a[4][1]==3?block:miss;mostrar_dano(a[2]==0?1:0,dano,a[3][5]>0?false:a[4][1]==3,b)}}else{dano=a[3][5]>0?a[3][5]:miss;mostrar_dano(a[2]==0?1:0,dano,false,b)}}function set_sprite(a){var b=$(a).hasClass("personagem")?0:1;if(b==0){sprite=sprites[$(a).attr("sprite")];sprite_img=sprites[$(a).attr("sprite")];sprite=sprite["default"]==true?sprites["default"]:sprite}else if(b==1){sprite=armas[$(a).attr("sprite")];sprite_img=armas[$(a).attr("sprite")];sprite=sprite["default"]==true?sprites["default"]:sprite}mirror=$(a).hasClass("mirror");img=mirror?sprite_img["image"].split(".")[0]+"_mirror."+sprite_img["image"].split(".")[1]:sprite_img["image"];$(a).css({backgroundImage:"url(img/"+(b==0?"personagens":"armas")+"/"+img+")",backgroundPosition:mirror?(sprite["width"]-sprite["size"][0])*-1+"px 0px":"0px 0px",width:sprite["size"][0],height:sprite["size"][1]})}function get_sprite_img(a){var b=$(a).hasClass("personagem")?sprites:armas;var c=b[$(a).attr("sprite")];return c}function get_mirror(a){return a.split(".")[0]+"_mirror."+a.split(".")[1]}function get_sprite(a){var b=$(a).hasClass("personagem")?sprites:armas;var c=b[$(a).attr("sprite")];c=c["default"]==true?b["default"]:c;return c}function get_pos(a){return[parseInt($(a).css("margin-left").split("px")[0]),parseInt($(a).css("margin-top").split("px")[0])]}acoes=[];delay=0;perto=false;frame_atual=0

//database.js

fps=25;tempo_corrida=650;init_x_p1=130;init_x_p2=570;block="Block";miss="Fail";sprites={"default":{width:800,size:[79,79],spacing:1,speed:100,parado:[0,0,4],andando:[80*4,0,4],correndo:[0,80*2,3],soco1:[0,80,2],soco2:[80*2,80,2],chute1:[80*4,80,2],chute2:[80*6,80,2],arma1:[80*6,80*6,4,50],caindo:[0,80*4,4],caido:[80*4,80*4,1],tomando:[80*6,80*4,3],esquivando:[0,80*6,3],defendendo:[80*6,80*5,2],pegando_arma:[0,80*5,1],levantando:[80*6,80*3,1],ganhando:[80*8,0,1]},demente:{image:"demente.png","default":true},rage:{image:"rage.png","default":true},troll:{image:"troll.png","default":true},pokerface:{image:"pokerface.png","default":true},forever_alone:{image:"forever_alone.png","default":true},megusta:{image:"megusta.png","default":true},serious:{image:"serious.png","default":true},challenge:{image:"challenge.png","default":true},yuno:{image:"yuno.png","default":true},fuckyea:{image:"fuckyea.png","default":true},fap:{image:"fap.png","default":true},lol:{image:"lol.png","default":true},cereal_guy:{image:"cereal_guy.png","default":true},okay:{image:"okay.png","default":true},fodase:{image:"fodase.png","default":true},fap_derpina:{image:"fap_derpina.png","default":true},challenge_derpina:{image:"challenge_derpina.png","default":true},forever_alone_derpina:{image:"forever_alone_derpina.png","default":true},fuckyea_derpina:{image:"fuckyea_derpina.png","default":true},rage_derpina:{image:"rage_derpina.png","default":true},megusta_derpina:{image:"megusta_derpina.png","default":true},pokerface_derpina:{image:"pokerface_derpina.png","default":true},serious_derpina:{image:"serious_derpina.png","default":true},troll_derpina:{image:"troll_derpina.png","default":true},demente_derpina:{image:"demente_derpina.png","default":true},lol_derpina:{image:"lol_derpina.png","default":true},cereal_guy_derpina:{image:"cereal_guy_derpina.png","default":true},okay_derpina:{image:"okay_derpina.png","default":true},fodase_derpina:{image:"fodase_derpina.png","default":true},yuno_derpina:{image:"yuno_derpina.png","default":true}};armas={"default":{tipo:1,distancia:false,width:320,size:[79,79],spacing:1,speed:100,parado:[0,0,4],batendo:[0,80,4,50],correndo:[0,80*2,3],esquivando:[0,80*3,3],pegando:[80*3,80*3,1],defendendo:[0,80*4,2],tomando:[0,80*5,3],caido:[80*3,80*5,1],caindo:[0,80*3,5],soltando:[0,80*6,2]},taco:{image:"taco.png","default":true},faca:{image:"faca.png",tipo:0,distancia:false,"default":false,sound:"faca",width:320,size:[79,79],spacing:1,speed:100,parado:[0,0,4],batendo:[0,80,2],correndo:[0,80*2,3],esquivando:[0,80*3,3],pegando:[80*3,80*3,1],defendendo:[0,80*4,2],tomando:[0,80*5,3],caido:[80*3,80*5,1],soltando:[0,80*6,2]},soco_ingles:{image:"soco_ingles.png",tipo:0,distancia:false,"default":false,sound:"hit2",width:320,size:[79,79],spacing:1,speed:100,parado:[0,0,4],batendo:[0,80,2],correndo:[0,80*2,3],esquivando:[0,80*3,3],pegando:[80*3,80*3,1],defendendo:[0,80*4,2],tomando:[0,80*5,3],caido:[80*3,80*5,1],soltando:[0,80*6,2]},patinha:{image:"patinha.png",tipo:0,distancia:false,"default":false,sound:"hit2",width:320,size:[79,79],spacing:1,speed:100,parado:[0,0,4],batendo:[0,80,2],correndo:[0,80*2,3],esquivando:[0,80*3,3],pegando:[80*3,80*3,1],defendendo:[0,80*4,2],tomando:[0,80*5,3],caido:[80*3,80*5,1],soltando:[0,80*6,2]},marreta:{image:"marreta.png","default":true,sound:"hit3"},marreta_chapolim:{image:"marreta_chapolim.png","default":true,sound:"borracha"},catapulta:{image:"catapulta.png","default":false,sound:"pedra,catapulta",programado:true,delay:1800,x_plus:-50,y_plus:10,tipo:0,distancia:true,width:320,size:[79,79],spacing:1,speed:100,parado:[0,0,4],batendo:[0,80,4],correndo:[0,80*2,3],esquivando:[0,80*3,3],pegando:[80*3,80*3,1],defendendo:[0,80*4,2],tomando:[0,80*5,3],caido:[80*3,80*5,1],caindo:[0,80*3,5],soltando:[0,80*6,2]},serra_eletrica:{image:"serra_eletrica.gif","default":true,sound:"serra"},mace:{image:"mace.png","default":true},espada:{image:"espada.png","default":true,sound:"faca"},ferramenta:{image:"ferramenta.png","default":true,sound:"hit3"},coxa:{image:"coxa.png","default":true},fire_sword:{image:"fire_sword.gif","default":true,sound:"fire"},bacon:{image:"bacon.png","default":true},doce:{image:"doce.png","default":true},foice:{image:"foice.png","default":true,sound:"faca"},espada2:{image:"espada2.png","default":true,sound:"faca"},ice_sword:{image:"ice_sword.gif","default":true,sound:"ice"},thunder_sword:{image:"thunder_sword.gif","default":true,sound:"thunder"},lolipop:{image:"lolipop.png","default":true},ogre_axe:{image:"ogre_axe.png","default":true},flame_sword:{image:"flame_sword.png","default":true,sound:"faca"},steel_dagger:{image:"steel_dagger.png","default":true},fly_sword:{image:"fly_sword.png","default":true,sound:"faca"},double_axe:{image:"double_axe.png","default":true},arabian_dagger:{image:"arabian_dagger.png","default":true,sound:"faca"},poseidon_trident:{image:"poseidon_trident.png","default":true,sound:"faca"},crazyegg_staff:{image:"crazyegg_staff.png","default":true},devil_mace:{image:"devil_mace.png","default":true},talisma_axe:{image:"talisma_axe.png","default":true}};equipamentos=[null,"taco","faca","soco_ingles","patinha","marreta","marreta_chapolim","catapulta","serra_eletrica","mace","espada","ferramenta","coxa","fire_sword","bacon","doce","foice","espada2","ice_sword","thunder_sword","lolipop","ogre_axe","flame_sword","steel_dagger","fly_sword","double_axe","arabian_dagger","poseidon_trident","crazyegg_staff","devil_mace","talisma_axe"];habilidades={"nyan-cat":{delay:2500,sound:"nyan-cat",images:"nyan-cat.gif[mirror],nyan-cat-rainbow.gif"},pedobear:{delay:4500,sound:"ai",images:"pedobear.gif,pedobear_mirror.gif"},domokun:{delay:6400,sound:"rugido,rugido2,terremoto",images:"domo.gif[mirror]"},over9000:{delay:3800,sound:"maisdeoitomil,ki,teleport",images:"ki.png,visor.gif[mirror]"}};ordem_habilidades=[null,"nyan-cat","pedobear","domokun","over9000"];eventos={orly:{delay:0,sound:"toasty",images:"orly.png[mirror]",antes:true}};ordem_eventos=[null,"orly"]

// movimento.js

function mostrar_dano(a,b,c,d,e){var f=$(".personagem[rel='"+a+"']");var g=parseInt($(f).css("margin-left").split("px")[0]);var h=parseInt($(f).css("margin-top").split("px")[0]);var e=e==undefined?false:e;if(e){$("#luta").append('<div class="dano"><small>'+(lingua.indexOf("pt")<0?"Critical":"CrÃ­tico")+"</small><br />"+b+"</div>")}else{$("#luta").append('<div class="dano">'+b+"</div>")}var i=$("#luta .dano:last");$(i).css({marginLeft:g+30,marginTop:h}).animate({marginTop:"-=20px",marginLeft:a==0?"-=30px":"+=30px",opacity:.5},500).animate({marginLeft:a==0?"-=5px":"+=5px",opacity:.4},50).animate({marginTop:"+=30px",marginLeft:a==0?"-=20px":"+=20px",opacity:0},500,function(){$(i).remove()});if(d!=undefined&&d!=null){sound(d)}else if(c!=undefined&&c){sound("defesa")}else if(b>0){sound("hit")}else{sound("esquiva")}if(!isNaN(b)){players[a]["hp"]-=b;var j=players[a];var k=j["hp"]/j["hp_max"]*100;var l=parseInt(258*k/100);l=isNaN(l)?0:l<0?0:l;$('.hp[rel="'+a+'"] .bar').css({width:l+"px"});if(a==1){$('.hp[rel="1"] .bar').css({marginLeft:258-l+22+"px",backgroundPosition:"-"+(258-l)+"px 0"})}}}function movimentar(a,b,c){var d=get_sprite(a);var e=d[b];var f=e.length==4||e.length==6?e[3]:d["speed"];mudar_posicao(a,b);if(c!=undefined)setTimeout(c,f*e[2])}function mudar_posicao(a,b){if($(a).length<=0)return false;var c=get_sprite(a);var d=c[b];if(b!=$(a).attr("status")){$(a).attr("pos",0);$(a).attr("status",b);var e=0}else{var e=$(a).attr("pos")}var f=d.length==5?d[3]:d.length==6?d[4]:c["size"][0];var g=d.length==5?d[4]:d.length==6?d[5]:c["size"][1];var h=c["spacing"];var i=(d[0]+(f+h)*e)*-1;var j=d[1]*-1;if($(a).hasClass("mirror")){i=(c["width"]-d[0]-f-(f+h)*e)*-1}$(a).css({backgroundPosition:i+"px "+j+"px"})}function mover_ate(a,b,c,d){jogador2=$(a).attr("rel")=="1";margin=parseInt($(a).css("margin-left").split("px")[0]);movimento=(margin>b?"-="+(margin-b):"+="+(b-margin))+"px";mudar_posicao(a,"correndo");$(a).animate({marginLeft:movimento,marginTop:c},tempo_corrida,d)}function inverter(a){$(a).toggleClass("mirror");set_sprite(a)}function mover(a){tipo=a[1];var b=$('.personagem[rel="'+a[0]+'"]');var c=$('.personagem[rel="'+(a[0]==0?1:0)+'"]');arma=$('.arma[rel="'+a[0]+'"]');sprite_player=get_sprite(b);sprite_enemy=get_sprite(c);if(arma.length>0)sprite_arma=get_sprite(arma);if((tipo==0||tipo==1)&&arma.length>0){movimentar(b,sprite_arma["tipo"]>0?"arma"+sprite_arma["tipo"]:"soco1");movimentar(arma,"batendo");if($(arma).attr("sprite")=="faca"){$(arma).css({marginLeft:a[0]==0?"+=13px":"-=13px"});setTimeout(function(){$(arma).css({marginLeft:a[0]==0?"-=13px":"+=13px"})},200)}}else if(tipo==0||tipo==1){movimentar(b,"soco1")}}function andar(a,b,c){var d=$('.personagem[rel="'+a+'"]');var e=$('.personagem[rel="'+(a==0?1:0)+'"]');var f=$('.arma[rel="'+a+'"]');var g=get_sprite(d);var h=get_sprite(e);var i=false;if(f.length>0){var j=get_sprite(f);i=j["distancia"]==true}x_player=parseInt($(d).css("margin-left").split("px")[0]);x_enemy=parseInt($(e).css("margin-left").split("px")[0]);y_player=parseInt($(d).css("margin-top").split("px")[0]);y_enemy=parseInt($(e).css("margin-top").split("px")[0]);if(b){x=x_enemy+(a==0?0-g["size"][0]/2:h["size"][0]/2);y=y_enemy}else{inverter(d);if(!i&&f.length>0)inverter(f);rand_x=parseInt(Math.random()*30*(parseInt(Math.random()*2)==1?1:-1));x=(a==0?init_x_p1:init_x_p2)+rand_x;x=a==0?x<init_x_p1?init_x_p1:x:x>init_x_p2?init_x_p2:x;y=parseInt(y_player+Math.random()*30*(parseInt(Math.random()*2)==1?1:-1))}y=y>140?140:y<70?70:y;distancia=x_player-x;if(b){mover_ate(d,x,y,c);if(f.length>0&&!i){mover_ate(f,x,y,c)}}else{mover_ate(d,x,y,function(){inverter(d)});if(f.length>0&&!i){mover_ate(f,x,y,function(){inverter(f)})}}}acao_atual=0;finalizou=false;setTimeout(function(){setInterval(function(){$(".personagem").each(function(){e=sprites[$(this).attr("sprite")];e=e["default"]==true?sprites["default"]:e;var a=e[$(this).attr("status")];var b=a.length==4||a.length==6?a[3]:e["speed"];if(parseInt($(this).attr("frame"))>=b){var c=$(this).attr("pos")>=a[2]-1?0:parseInt($(this).attr("pos"))+1;$(this).attr("pos",c);$(this).attr("frame","0");mudar_posicao(this,$(this).attr("status"))}else{$(this).attr("frame",parseInt($(this).attr("frame"))+fps)}});$(".arma").each(function(){b=armas[$(this).attr("sprite")];b=b["default"]==true?armas["default"]:b;var a=b[$(this).attr("status")];if(a){var c=a.length==4||a.length==6?a[3]:e["speed"];if(parseInt($(this).attr("frame"))>=c){var d=$(this).attr("pos")>=a[2]-1?0:parseInt($(this).attr("pos"))+1;$(this).attr("pos",d);$(this).attr("frame","0");mudar_posicao(this,$(this).attr("status"))}else{$(this).attr("frame",parseInt($(this).attr("frame"))+fps)}}});if(!finalizou){for(i=acao_atual;i<acoes.length;i++){acao=acoes[i];if(acao[0]<=frame_atual){var a=$(".personagem[rel='"+acao[2]+"']");var b=$(".arma[rel='"+acao[2]+"']");if(acao[1]=="parar"){mudar_posicao(a,"parado");if(b.length>0)mudar_posicao(b,"parado")}else if(acao[1]=="aproximar"){andar(acao[2],true)}else if(acao[1]=="afastar"){andar(acao[2],false)}else if(acao[1]=="atacar"||acao[1]=="contra-atacar"){if($(b).length>0){usar_arma(acao)}else{mover(acao[3]);dar_dano(acao)}}else if(acao[1]=="pegar equipamento"){var a=$(".personagem[rel='"+acao[2]+"']");mudar_posicao(a,"pegando_arma");$("#luta").append('<div class="arma '+(acao[2]==0?"":"mirror")+'" sprite="'+equipamentos[acao[3][2]]+'" status="pegando" frame="'+$(a).attr("frame")+'" pos="'+$(a).attr("pos")+'" rel="'+acao[2]+'"></div>');var b=$(".arma[rel='"+acao[2]+"']");var c=0;var d=0;set_sprite(b);var e=get_sprite(b);if(e["x_plus"]!=undefined)c=e["x_plus"];if(e["y_plus"]!=undefined)d=e["y_plus"];var f=get_pos(a);$(b).css({marginTop:"-80px",marginLeft:f[0]+c*(acao[2]==0?1:-1)});$(b).animate({marginTop:f[1]+d},500)}else if(acao[1]=="jogar equipamento fora"){var b=$(".arma[rel='"+acao[2]+"']");nao_mover=get_sprite(b)["distancia"]==true;if(!nao_mover){mudar_posicao(b,"soltando");setTimeout(function(){mudar_posicao(b,"caido")},100);var g=acao[2]==0?"-=80px":"+=80px";var h=acao[2]==0?"-=30px":"+=30px";$(b).attr("rel","");$(b).animate({marginLeft:g,marginTop:"-=30px"},300).animate({marginLeft:h,marginTop:"+=60px"},300).delay(500).animate({opacity:0},500,function(){$(this).remove()})}else{$(b).attr("rel","");$(b).animate({opacity:0},500,function(){$(this).remove()})}}else if(acao[1]=="tomar"){mudar_posicao(a,"tomando");if(b.length>0)mudar_posicao(b,"tomando")}else if(acao[1]=="defender"){mudar_posicao(a,"defendendo");if(b.length>0)mudar_posicao(b,"defendendo")}else if(acao[1]=="esquivar"){$(a).animate({marginTop:"-=20px",marginLeft:acao[2]==0?"-=30px":"+=30px"},50).animate({marginTop:"+=20px",marginLeft:acao[2]==0?"-=30px":"+=30px"},50);if(b.length>0){$(b).animate({marginTop:"-=20px",marginLeft:acao[2]==0?"-=30px":"+=30px"},50).animate({marginTop:"+=20px",marginLeft:acao[2]==0?"-=30px":"+=30px"},50);mudar_posicao(b,"esquivando")}mudar_posicao(a,"esquivando")}else if(acao[1]=="habilidade"){habilidade(acao)}else if(acao[1]=="evento"){ativar_evento(acao)}else if(acao[1]=="acabar luta"){var j=".personagem[rel='0']";var k=".personagem[rel='1']";var l=".arma[rel='0']";var m=".arma[rel='1']";if(players[0]["hp"]<players[1]["hp"]){j=".personagem[rel='1'],.arma[rel='1']";k=".personagem[rel='0'],.arma[rel='0']";l=".arma[rel='1']";m=".arma[rel='0']"}setTimeout(function(){$(".venceu").fadeIn()},500);mudar_posicao(k+","+m,"caido");mudar_posicao(j,"ganhando");$(m).css({marginTop:"+=40px"})}acao_atual=i+1}if(acao_atual>=acoes.length)finalizou=true}}frame_atual+=25},fps)},1e3)

// habilidades.js
function habilidade(a){var b=".personagem[rel='"+a[2]+"']";var c=".arma[rel='"+a[2]+"']";var d=".personagem[rel='"+(a[2]==0?1:0)+"']";var e=".arma[rel='"+(a[2]==0?1:0)+"']";var f=ordem_habilidades[a[3][3]];mudar_posicao(b,"pegando_arma");mudar_posicao(c,"pegando");if(f=="nyan-cat"){sound("nyan-cat");$("#luta").append('<div class="objeto"></div>');var g=$("#luta .objeto:last");$("#luta").append('<div class="objeto"></div>');var h=$("#luta .objeto:last");$(d+","+e).css({zIndex:4});if(get_pos(d)[1]<get_pos(b)[1]){$(b+","+c).css({zIndex:4})}$(g).css({marginTop:get_pos(d)[1]+16+"px",marginLeft:a[2]==0?"-103px":"883px",width:"103px",height:"64px",zIndex:3,background:a[2]==0?"url(img/habilidades/nyan-cat.gif)":"url(img/habilidades/nyan-cat_mirror.gif)"});$(h).css({marginTop:get_pos(d)[1]+18+"px",marginLeft:a[2]==0?"-103px":"883px",zIndex:2,width:"46px",height:"54px",background:"url(img/habilidades/nyan-cat-rainbow.gif)"});$(h).animate({width:"960px",marginLeft:"-103px"},1600).animate({opacity:0},800,function(){$(d+","+e+","+b+","+c).css({zIndex:0});$(h).remove()});setTimeout(function(){mudar_posicao(d,"caindo");dar_dano(a)},950);setTimeout(function(){mudar_posicao(b+","+c,"parado")},300);$(g).animate({marginLeft:a[2]==0?"840px":"-150px"},1600,function(){$(g).remove()})}else if(f=="pedobear"){$("#luta").append('<img src="img/habilidades/pedobear'+(a[2]==0?"":"_mirror")+'.gif" class="objeto"></img>');var i=$("#luta .objeto:last");for(var j=0;j<20;j++){if(j%2==0){setTimeout(function(){$(i).attr("src","img/habilidades/pedobear.gif")},j*400)}else{setTimeout(function(){$(i).attr("src","img/habilidades/pedobear_mirror.gif")},j*400)}}$(d+","+e).css({zIndex:4});var k=get_pos(d)[1];setTimeout(function(){sound("ai");mudar_posicao(d,"caindo");dar_dano(a)},2e3);setTimeout(function(){mudar_posicao(b+","+c,"parado")},600);setTimeout(function(){sound("queda");mudar_posicao(e,"caido");mudar_posicao(d,"caido")},3800);setTimeout(function(){mudar_posicao(e,"parado");$(e).css({marginTop:$(d).css("margin-top")});mudar_posicao(d,"levantando");$(d+","+e).css({zIndex:0})},4800);$(d).delay(2e3).animate({marginTop:"-=250px"}).delay(1e3).animate({marginTop:k+"px"});$(e).delay(2e3).animate({marginTop:"-=200px"}).delay(1e3).animate({marginTop:k+30+"px"});$(i).css({width:"5px",height:"9px",marginTop:get_pos(d)[1]+15+"px",marginLeft:get_pos(d)[0]+(a[2]==0?200:-200)+"px"}).animate({marginTop:"-=15px",marginLeft:a[2]==0?"-=180px":"+=200px",width:"50px",height:"90px"},2e3).animate({marginTop:"+=15px",marginLeft:a[2]==0?"+=180px":"-=200px",width:"5px",height:"9px"},2e3,function(){$(i).remove()})}else if(f=="domokun"){$("#luta").append('<div class="objeto"></div>');var l=$("#luta .objeto:last");setTimeout(function(){mudar_posicao(b+","+c,"parado")},600);setTimeout(function(){sound("rugido")},600);setTimeout(function(){sound("rugido2")},4e3);$(l).css({background:"url(img/habilidades/domo"+(a[2]==0?"":"_mirror")+".gif)",width:"421px",height:"191px",marginTop:"-191px",marginLeft:"150px",zIndex:3}).animate({marginTop:"0px"},5e3).animate({marginTop:"-191px"},100,function(){$(this).css({backgroundPosition:"-421px 0",width:"273px",height:"228px",marginLeft:get_pos(d)[0]-50+(a[2]==0?0:-80)+"px"}).animate({marginTop:get_pos(d)[1]-140+"px"},100,function(){sound("terremoto");mudar_posicao(e,"caido");$(e).css({marginTop:"+=30px"});mudar_posicao(d,"caido");setTimeout(function(){mudar_posicao(e,"parado");$(e).css({marginTop:$(d).css("margin-top")});mudar_posicao(d,"levantando")},1500);$("#luta").animate({marginTop:"+=8px"},100).animate({marginTop:"-=6px"},150).animate({marginTop:"+=4px"},200).animate({marginTop:"-=2px"},250).animate({marginTop:"0"},300);dar_dano(a)}).delay(200).animate({marginTop:"-228px"},400)})}else if(f=="over9000"){mudar_posicao(b+","+c,"parado");$("#luta").append('<div class="objeto"></div>');var m=$("#luta .objeto:last");$(m).css({background:"url(img/habilidades/visor"+(a[2]==0?"":"_mirror")+".gif)",marginLeft:get_pos(d)[0]+(a[2]==0?35:10)+"px",marginTop:"-22px",width:"29px",height:"22px"}).animate({marginTop:get_pos(d)[1]+8+"px"});$(e).css({zIndex:2});$("#luta").append('<div class="objeto"></div>');var n=$("#luta .objeto:last");$(n).css({background:"url(img/habilidades/ki.png)",marginLeft:get_pos(b)[0]+(a[2]==0?5:0)+"px",marginTop:get_pos(b)[1]+7+"px",width:"75px",height:"80px",opacity:0}).animate({opacity:1},500);sound("ki");$("#luta").append('<div class="objeto"></div>');var o=$("#luta .objeto:last");$(o).css({marginLeft:get_pos(d)[0]-80+"px",marginTop:get_pos(d)[1]-20+"px",width:"240px",textAlign:"center"});if(lingua.indexOf("pt")>=0){setTimeout(function(){sound("maisdeoitomil")},800);setTimeout(function(){$(o).append("Mais");setTimeout(function(){$(o).append(" de");setTimeout(function(){$(o).append(" 8000!?")},500)},500)},1e3)}else{setTimeout(function(){sound("overninethousand")},500);setTimeout(function(){$(o).append("It's");setTimeout(function(){$(o).append(" over");setTimeout(function(){$(o).append(" NINE");setTimeout(function(){$(o).append(" THOU")},500);setTimeout(function(){$(o).append("SA")},600);setTimeout(function(){$(o).append("A")},800);setTimeout(function(){$(o).append("A")},1e3);setTimeout(function(){$(o).append("A")},1200);setTimeout(function(){$(o).append("A")},1400);setTimeout(function(){$(o).append("ND!")},1600)},200)},400)},600)}for(j=0;j<100;j++){setTimeout(function(){try{pos=parseInt($(n).css("background-position").split("%")[0].split("px")[0])+75;$(n).css({backgroundPosition:pos+"px 0"})}catch(a){}},50*(j+1))}setTimeout(function(){mudar_posicao(b+","+c,"correndo");sound("teleport");$(n).animate({opacity:0},200,function(){$(this).remove()});if($(c).length>0&&get_sprite(c)["distancia"]!=true){$(c).animate({marginTop:get_pos(d)[1]+"px",marginLeft:get_pos(d)[0]+(a[2]==0?-40:40)+"px"},200)}$(b).animate({marginTop:get_pos(d)[1]+"px",marginLeft:get_pos(d)[0]+(a[2]==0?-40:40)+"px"},200,function(){$(m).animate({opacity:0},200,function(){$(e).css({zIndex:2});$(this).remove()});$(o).animate({opacity:0},200,function(){$(this).remove()});if($(c).length>0){mudar_posicao(b,"arma1");if(get_sprite(c)["distancia"]!=true)mudar_posicao(c,"batendo")}else{mudar_posicao(b,"soco2")}mudar_posicao(d+","+e,"tomando");dar_dano(a);setTimeout(function(){andar(a[2],false);mudar_posicao(d+","+e,"parado");setTimeout(function(){mudar_posicao(b+","+c,"parado")},tempo_corrida)},200)})},3e3)}}

//armas.js
function usar_arma(a){var b=undefined;var c=".arma[rel='"+a[2]+"']";var d=".personagem[rel='"+a[2]+"']";var e=".personagem[rel='"+(a[2]==0?1:0)+"']";var f=".arma[rel='"+(a[2]==0?1:0)+"']";b=armas[$(c).attr("sprite")]["sound"];b=b!=undefined?b.split(",")[0]:undefined;sprite=$(c).attr("sprite");if(sprite=="catapulta"){var g=$("<div>").addClass("objeto");$("#luta").append(g);$(g).css({background:"url(img/armas/pedra.gif)",marginTop:"-30px",marginLeft:get_pos(c)[0]+(a[2]==0?6:46)+"px",width:"30px",height:"30px"}).animate({marginTop:get_pos(c)[1]+30+"px"},500,function(){sound("catapulta");var c=Math.abs(get_pos(e)[0]+(a[2]==0?10:30)-get_pos(g)[0]);for(i=0;i<parseInt(c/10);i++){setTimeout(function(){var b=Math.abs(get_pos(e)[0]+(a[2]==0?10:30)-get_pos(g)[0]);var d=parseInt((b-c/2)/20);$(g).css({marginLeft:a[2]==0?"+=10px":"-=10px",marginTop:(d>0?"-":"+")+"="+Math.abs(d)+"px"})},i*25)}setTimeout(function(){$(g).animate({marginLeft:a[2]==0?"-=30px":"+=30px",marginTop:"+=25px"},300).animate({opacity:0});if(a[4]){if(a[4][1]==2){$(e+","+f).animate({marginTop:"-=20px",marginLeft:a[2]==0?"+=30px":"-=30px"},50).animate({marginTop:"+=20px",marginLeft:a[2]==0?"+=30px":"-=30px"},50);mudar_posicao(e+","+f,"esquivando");dar_dano(a,"esquiva")}else if(a[4][1]==3){mudar_posicao(e+","+f,"defendendo");dar_dano(a,"defesa")}else{mudar_posicao(e+","+f,"tomando");dar_dano(a,b)}}else{mudar_posicao(e+","+f,"tomando");dar_dano(a,b)}setTimeout(function(){mudar_posicao(e+","+f,"parado")},300)},25*parseInt(c/10)+50)});setTimeout(function(){mudar_posicao(c,"batendo");setTimeout(function(){mudar_posicao(c,"parado")},400)},500)}else{mover(a[3]);dar_dano(a,b)}}

//eventos.js
function ativar_evento(a){var b=".personagem[rel='"+a[2]+"']";var c=".personagem[rel='"+(a[2]==0?1:0)+"']";var d=ordem_eventos[a[3][4]];if(d=="orly"){sound("toasty");$("#luta").append('<div class="objeto"></div>');var e=$("#luta .objeto:last");$(e).css({background:"url(img/eventos/orly"+(a[2]==0?"":"_mirror")+".png)",marginTop:"265px",marginLeft:(a[2]==0?600:100)+"px",width:"79px",height:"71px"}).animate({marginTop:"194px"}).delay(500).animate({marginTop:"265px"},function(){$(this).remove()})}}

//sons.js
function sound(a){$(".sound[name='"+a+"']").jPlayer("play",0)}function carrega_som(a){if(getInternetExplorerVersion()==-1||getInternetExplorerVersion()>=9){var b=$(a).attr("name");$(a).jPlayer("clearMedia");$(a).jPlayer({ready:function(){$(a).jPlayer("setMedia",{oga:"sounds/ogg/"+b+".ogg",mp3:"sounds/mp3/"+b+".mp3"})},supplied:"oga, mp3",swfPath:"flashs"})}}function getInternetExplorerVersion(){var a=-1;if(navigator.appName=="Microsoft Internet Explorer"){var b=navigator.userAgent;var c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(c.exec(b)!=null)a=parseFloat(RegExp.$1)}return a}

//jquery.backgroundPosition.js
(function($){if(!document.defaultView||!document.defaultView.getComputedStyle){var oldCurCSS=$.curCSS;$.curCSS=function(elem,name,force){if(name==='background-position'){name='backgroundPosition';}if(name!=='backgroundPosition'||!elem.currentStyle||elem.currentStyle[name]){return oldCurCSS.apply(this,arguments);}var style=elem.style;if(!force&&style&&style[name]){return style[name];}return oldCurCSS(elem,'backgroundPositionX',force)+' '+oldCurCSS(elem,'backgroundPositionY',force);};}var oldAnim=$.fn.animate;$.fn.animate=function(prop){if('background-position'in prop){prop.backgroundPosition=prop['background-position'];delete prop['background-position'];}if('backgroundPosition'in prop){prop.backgroundPosition='('+prop.backgroundPosition;}return oldAnim.apply(this,arguments);};function toArray(strg){strg=strg.replace(/left|top/g,'0px');strg=strg.replace(/right|bottom/g,'100%');strg=strg.replace(/([0-9\.]+)(\s|\)|$)/g,"$1px$2");var res=strg.match(/(-?[0-9\.]+)(px|\%|em|pt)\s(-?[0-9\.]+)(px|\%|em|pt)/);return[parseFloat(res[1],10),res[2],parseFloat(res[3],10),res[4]];}$.fx.step.backgroundPosition=function(fx){if(!fx.bgPosReady){var start=$.curCSS(fx.elem,'backgroundPosition');if(!start){start='0px 0px';}start=toArray(start);fx.start=[start[0],start[2]];var end=toArray(fx.end);fx.end=[end[0],end[2]];fx.unit=[end[1],end[3]];fx.bgPosReady=true;}var nowPosX=[];nowPosX[0]=((fx.end[0]-fx.start[0])*fx.pos)+fx.start[0]+fx.unit[0];nowPosX[1]=((fx.end[1]-fx.start[1])*fx.pos)+fx.start[1]+fx.unit[1];fx.elem.style.backgroundPosition=nowPosX[0]+' '+nowPosX[1];};})(jQuery);