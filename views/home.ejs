<!doctype html>
<!--[if lt IE 7]> <html class="no-js ie6 oldie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js ie7 oldie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js ie8 oldie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Meme Kombat</title>
  <meta name="description" content="Escolha seu meme favorito e destrua seus amigos na arena neste incrível jogo de luta de memes">
  <meta name="author" content="Rogério Chaves">

  <meta property="og:title" content="Meme Kombat" />
  <meta property="og:type" content="game" />
  <meta property="og:url" content="<%= process.env.FACEBOOK_APP_URL %>" />
  <meta property="og:image" content="<%= process.env.CDN %>img/logo_post.png" />
  <meta property="og:site_name" content="Meme Kombat" />
  <meta property="fb:app_id" content="<%= process.env.FACEBOOK_APP_ID %>" />
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Gloria Hallelujah">
  <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.css" />
  <style type="text/css">
    body{margin:0 auto; padding:0; border:2px solid #DDD; width:760px; font-family: 'Gloria Hallelujah', "Lucida Grande", Tahoma, sans-serif; background:#FFF url(/images/bg2.jpg) center 0; border-width: 0 2px; height: 650px;}
    .bg{height: 100%; background:#FFF url(/img/bg.jpg) center 0; width: 760px;}
    .content{width: 450px; margin: 0 auto; padding-top:100px;}
    h2, h1{font-weight: normal;}
    h2{font-size: 15px; padding:0; color: #999; text-align: center;}
    hr{border: none; margin-top: -5px; margin-bottom: 50px; width: 350px;}
    .derp{width: 80px; height: 80px; background: url(/images/derp.gif) no-repeat; float: left;}
    .jogar_agora{margin: 30px 0 0 40px;}
    .jogar_agora a{display: block; float: left; text-decoration: none; color: #333; margin-left: 20px;}
    .jogar_agora h1{font-size: 20px; float: left; background: url(/img/fundo-lutar.png) no-repeat; width: 249px; height: 55px; text-align: center; padding-top: 5px;}
    .jogar_agora a:hover{color: #EA9F83;}
    .jogar_agora a img{float: left; margin: 20px 0 0 5px;}
    .clear{clear:both}

    .yuno{position: absolute; margin:100px 0 0 -265px; width: 220px; text-align: center;}
    .championist{position: absolute; margin-left: -252px; bottom:0}
    .ui{position: absolute; margin: 130px 0 0 800px; width: 224px; text-align: center;}
    .puking-rainbow{position: absolute; margin-left: 761px; bottom:0}

    .nyan .cat{position: absolute; left:0; top:20px; z-index:1}
    .nyan .rainbow{position: absolute; background: url(/img/habilidades/nyan-cat-rainbow.gif); width: 46px; height: 54px; left:0; top:23px;}

    .fb-like{position: absolute!important; margin-left: 100px; bottom:10px}

    .firebase-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, .2);
    }
    .firebase-login-box{
      display: none;
      position: absolute;
      top: calc(50% - 140px);
      right: 0;
      left: 0;
      max-width: 260px;
      margin: 0 auto;
      background:#FFF url(/img/bg.jpg) center 0;
      border: 2px solid #DDD;
    }
    .mdl-button--raised {
      box-shadow: none;
      border: 2px solid #DDD;
    }
    .firebaseui-idp-password {
      background: #F3886D!important;
    }
  </style>
</head>
<body>
<div class="yuno">
  <img src="/images/yuno.png" /><br>
  Y U NO Playing Meme Kombat yet?
</div>
<div class="championist">
  <img src="/images/championist.png" />
</div>

<div class="ui">
  <img src="/images/ui.png" /><br>
  Ui, Meme Kombat!
</div>
<div class="puking-rainbow">
  <img src="/images/puking-rainbow.png" />
</div>

<div class="nyan">
  <div class="rainbow"></div>
  <div class="cat"><img src="/img/habilidades/nyan-cat.gif"></div>
</div>

<div class="firebase-overlay"></div>
<div class="firebase-login-box"></div>

<div class="bg">
  <div class="content">
    <h2>Escolha seu meme e destrua seus amigos</h2>
    <hr />
    <div class="logo"><img src="/images/meme-kombat-logo.png" alt=""></div>
    <div class="jogar_agora">
      <div class="derp"></div>
      <a href="#" class="play-button">
        <h1>Jogar Agora</h1>
      </a>
      <div class="clear"></div>
    </div>
  </div>
  <div class="fb-like" data-href="https://www.facebook.com/MemeKombat" data-send="true" data-width="570" data-show-faces="true"></div>
</div>

<script src="<%= process.env.CDN %>js/libs/jquery-1.6.2.min.js"></script>
<script type="text/javascript">
  (function anim(){
    $('.nyan .cat').animate({
      left: '100%'
    }, 1e4 * 4);
    $('.nyan .rainbow').animate({
       width: '105%'
    }, 1e4 * 4, function(){
      $('.nyan .rainbow').fadeOut(5000, function(){
        $('.nyan .cat').css({left: 0});
        $('.nyan .rainbow').css({width: '46px'}).show();
        anim();
      });
    });
  })();
</script>

<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-analytics.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/ui/4.8.1/firebase-ui-auth.js"></script>
<script>
  var overlay = document.querySelector(".firebase-overlay");
  var loginBox = document.querySelector(".firebase-login-box");
  document.querySelector(".play-button").addEventListener('click', function () {
    overlay.style.display = 'block';
    loginBox.style.display = 'block';
  });
  overlay.addEventListener('click', function () {
    overlay.style.display = 'none';
    loginBox.style.display = 'none';
  });

  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  var firebaseConfig = {
    apiKey: "AIzaSyDDymyxv1VZyrwQo2ozXGJPxhmD_VPiAd8",
    authDomain: "memekombat-a46ed.firebaseapp.com",
    projectId: "memekombat-a46ed",
    storageBucket: "memekombat-a46ed.appspot.com",
    messagingSenderId: "553063652277",
    appId: "1:553063652277:web:221e0df59683d5e2a5d7fc",
    measurementId: "G-MY0W67371B"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();

  // Initialize the FirebaseUI Widget using Firebase.
  var ui = new firebaseui.auth.AuthUI(firebase.auth());
  ui.start('.firebase-login-box', {
    callbacks: {
      signInSuccessWithAuthResult: function(authResult, redirectUrl) {

        // return user.getIdToken().then(idToken => {
        //   // Session login endpoint is queried and the session cookie is set.
        //   // CSRF protection should be taken into account.
        //   // ...
        //   const csrfToken = getCookie('csrfToken')
        //   return postIdTokenToSessionLogin('/sessionLogin', idToken, csrfToken);
        // });
        authResult.user.getIdToken().then(idToken => {
          var form = document.createElement("form");
          form.action = "/login";
          form.method = "POST";

          var input = document.createElement("input");
          input.type = "hidden";
          input.name = "idToken";
          input.value = idToken;

          form.appendChild(input);
          document.body.appendChild(form);
          form.submit();
        });
        return false;
      },
    },
    signInOptions: [{
      provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,
      requireDisplayName: true
    }, {
      provider: firebase.auth.TwitterAuthProvider.PROVIDER_ID,
      requireDisplayName: true
    }, {
      provider: firebase.auth.FacebookAuthProvider.PROVIDER_ID,
      requireDisplayName: true
    }, {
      provider: firebase.auth.GoogleAuthProvider.PROVIDER_ID,
      requireDisplayName: true
    }],
  });
</script>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/pt_BR/all.js#xfbml=1&appId=316368308396738";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

</body>
</html>
